<!DOCTYPE html>
<html lang="ru">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MetaSwap — мгновенный обмен TON ↔ USDT</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <header class="site-header">
      <div class="shell">
        <div class="brand">
          <span class="logo" aria-label="MetaSwap">MetaSwap</span>
          <span class="brand__caption">TON ↔ USDT обменник</span>
        </div>
        <div class="header-controls">
          <span class="wallet-chip hidden" id="walletChip" aria-live="polite"></span>
          <button class="text-btn hidden" id="disconnectBtn" type="button">Отключить</button>
          <button class="primary-btn" id="openWalletModal" type="button">
            Подключить кошелёк
          </button>
        </div>
      </div>
    </header>

    <main>
      <section class="swap" id="swap">
        <div class="shell">
          <div class="swap-card">
            <header class="swap-card__head">
              <h1>MetaSwap — быстрый обмен TON ↔ USDT</h1>
              <p>
                Подключите кошелёк TonKeeper, Trust Wallet или MetaMask, выберите направление
                обмена и следите за статусом операции в реальном времени.
              </p>
            </header>

            <form class="swap-form" id="swapForm" autocomplete="off">
              <div class="swap-field">
                <label class="field-label" for="fromAmount">Отдаёте</label>
                <div class="field-row">
                  <input
                    id="fromAmount"
                    name="fromAmount"
                    type="number"
                    step="0.01"
                    min="0"
                    placeholder="0.00"
                    inputmode="decimal"
                    required
                  />
                  <select id="fromToken" name="fromToken" aria-label="Отдаёте токен">
                    <option value="TON">TON</option>
                    <option value="USDT">USDT</option>
                  </select>
                </div>
                <p class="field-hint" id="fromBalance">Доступно — 0 TON</p>
              </div>

              <button class="circle-btn" id="flipPair" type="button" aria-label="Поменять местами">
                ⇆
              </button>

              <div class="swap-field">
                <label class="field-label" for="toAmount">Получаете</label>
                <div class="field-row field-row--muted">
                  <input id="toAmount" type="text" readonly value="0.00" aria-live="polite" />
                  <select id="toToken" name="toToken" aria-label="Получаете токен">
                    <option value="USDT">USDT</option>
                    <option value="TON">TON</option>
                  </select>
                </div>
                <p class="field-hint" id="feeInfo">Комиссия — 0 USDT</p>
              </div>

              <button class="primary-btn primary-btn--block" type="submit">Swap</button>
            </form>

            <div class="swap-status" id="swapStatus" role="status" aria-live="polite">
              <span class="swap-status__label">Статус:</span>
              <span class="swap-status__value" id="swapStatusText">Подключите кошелёк</span>
              <span class="swap-status__time" id="swapStatusTime"></span>
            </div>

            <div class="balances">
              <div>
                <h3>Кошелёк</h3>
                <p id="walletTon">TON — 0.00</p>
                <p id="walletUsdt">USDT — 0.00</p>
              </div>
              <div>
                <h3>Баланс MetaSwap</h3>
                <p id="exchangeTon">TON — 0.00</p>
                <p id="exchangeUsdt">USDT — 0.00</p>
                <button class="text-btn" id="withdrawTon" type="button">
                  Вывести TON на кошелёк
                </button>
              </div>
            </div>
          </div>

          <aside class="swap-aside" aria-label="Сводка курса">
            <div class="rate-card">
              <p class="rate-card__label">Текущий курс</p>
              <p class="rate-card__value" id="rateValue">1 TON = 0 USDT</p>
              <p class="rate-card__hint">Обновление каждые 30 секунд</p>
            </div>
            <dl class="swap-meta">
              <div>
                <dt>Средняя комиссия</dt>
                <dd id="avgFee">0.0% + 0.00 USDT</dd>
              </div>
              <div>
                <dt>Объём за 24 часа</dt>
                <dd id="volumeValue">$0</dd>
              </div>
              <div>
                <dt>Сделок выполнено</dt>
                <dd id="tradesValue">0</dd>
              </div>
              <div>
                <dt>+ за последний час</dt>
                <dd id="hourlyDelta">+0</dd>
              </div>
            </dl>
          </aside>
        </div>
      </section>

      <section class="metrics" aria-labelledby="metrics-title">
        <div class="shell">
          <header class="section-header">
            <h2 id="metrics-title">Ключевые показатели MetaSwap</h2>
            <p>Статистика обновляется автоматикой раз в 24 часа и при каждой операции.</p>
          </header>
          <div class="metric-grid">
            <article class="metric-card">
              <h3>TON → USDT</h3>
              <p id="metricTonUsdt">1 TON = 0 USDT</p>
              <span>Валютный поток на тестнете</span>
            </article>
            <article class="metric-card">
              <h3>Объём 24ч</h3>
              <p id="metricVolume">$0</p>
              <span>Цель: $2.5M</span>
            </article>
            <article class="metric-card">
              <h3>Комиссия</h3>
              <p id="metricFee">0.0% + 0.00 USDT</p>
              <span>Настраивается в админ-панели</span>
            </article>
            <article class="metric-card">
              <h3>Сделки</h3>
              <p id="metricTrades">0</p>
              <span id="metricDelta">+0 за последний час</span>
            </article>
          </div>
        </div>
      </section>

      <section class="wallet-onboarding" aria-labelledby="wallet-title">
        <div class="shell">
          <div class="wallet-onboarding__content">
            <div>
              <h2 id="wallet-title">Подключите кошелёк за пару кликов</h2>
              <p>
                MetaSwap поддерживает TonKeeper, Trust Wallet и MetaMask. Выберите удобный вариант
                и авторизуйтесь через безопасную подпись.
              </p>
            </div>
            <button class="outline-btn" data-open-wallet type="button">Выбрать кошелёк</button>
          </div>
        </div>
      </section>

      <section class="support" aria-labelledby="support-title">
        <div class="shell">
          <header class="section-header">
            <h2 id="support-title">Нужна помощь?</h2>
            <p>
              Наша команда поддержки отвечает в течение 15 минут и сопровождает операции до
              поступления средств.
            </p>
          </header>
          <div class="support-grid">
            <div>
              <h3>Telegram</h3>
              <a href="https://t.me/metaswap_support" target="_blank" rel="noopener">
                @metaswap_support
              </a>
            </div>
            <div>
              <h3>Почта</h3>
              <a href="mailto:help@metaswap.io">help@metaswap.io</a>
            </div>
            <div>
              <h3>Юридический адрес</h3>
              <p>MetaSwap OU, Harju 12-7, Tallinn, Estonia</p>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer class="site-footer">
      <div class="shell">
        <p>© <span id="year"></span> MetaSwap. Все права защищены.</p>
        <p>Комплаенс KYC/AML — по требованиям выбранной юрисдикции.</p>
      </div>
    </footer>

    <div class="modal hidden" id="walletModal" role="dialog" aria-modal="true" aria-labelledby="walletModalTitle">
      <div class="modal__panel">
        <header class="modal__header">
          <h2 id="walletModalTitle">Подключить кошелёк</h2>
          <button class="icon-btn" id="closeWalletModal" type="button" aria-label="Закрыть">×</button>
        </header>
        <p class="modal__description">
          Выберите кошелёк. Мы создадим сессию и отобразим адрес, баланс и историю операций.
        </p>
        <div class="wallet-list">
          <button class="wallet-option" data-wallet="TonKeeper" type="button">
            <span>TonKeeper</span>
            <small>TON, NFT, dApp</small>
          </button>
          <button class="wallet-option" data-wallet="Trust Wallet" type="button">
            <span>Trust Wallet</span>
            <small>Мультичейн, поддержка WalletConnect</small>
          </button>
          <button class="wallet-option" data-wallet="MetaMask" type="button">
            <span>MetaMask</span>
            <small>TON через WalletConnect v2</small>
          </button>
        </div>
      </div>
    </div>

    <div class="toast hidden" id="toast" role="alert" aria-live="assertive"></div>

    <script
      <script src="https://cdn.jsdelivr.net/npm/@tonconnect/sdk@latest/dist/tonconnect-sdk.min.js"></script>
    ></script>
    <script src="script.js"></script>
  </body>
</html>
